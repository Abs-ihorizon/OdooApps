<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="brs_reports">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <div class="row text-center">
                        <div class="col-12">
                            <h2>Infotech Private Limited</h2>
                            <br/>
                            <h2>Bank Reconciliation</h2>
                        </div>
                    </div>
                    <div class="row mt-5">
                        <div class="col-6">
                            <span>Bank Name: <t t-esc="bank_name"/></span>
                        </div>
                        <div class="col-6 text-center">
                            <span>Bank Statement Ending Date: <t t-esc="date"/></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <span>Bank Statement</span>
                        </div>
                        <div class="col-6 text-center">
                            <span>
                                General Ledger A/C
                            </span>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-6">
                            <span>Statement Ending Balance <t t-esc="'%.2f'% (balance)"/></span>
                        </div>
                        <div class="col-6 text-center">
                            <span>Account Balance as of cut-off Date : <t t-if="header" t-esc="'%.2f'% (header[0]['un_receipt'] - header[0]['un_payment'])"/></span>
                            <br/>
                            <span>Un-Cleared Cheques/Payments : <t t-if="header" t-esc="'%.2f'% (header[0]['un_payment'])"/></span>
                            <br/>
                            <span>Un-Cleared Receipts/Deposits : <t t-if="header" t-esc=" '%.2f'% (header[0]['un_receipt'])"/></span>
                        </div>
                    </div>
                    <div class="row mb-5 mt-3">
                        <div class="col-6">
                            <span>Statement Ending Balance <t t-esc="'%.2f'% (balance)"/></span>
                        </div>
                        <div class="col-6 text-center">
                            <t t-if="header" t-set="adjusted" t-value="(header[0]['balance'] - header[0]['un_payment']) + header[0]['un_receipt']"/>
                            <span>Adjusted Account Balance : <t t-if="header" t-esc="'%.2f'%(adjusted)"/></span>
                            <br/>
                            <span>Difference/Variance : <t t-if="header" t-esc="'%.2f'%(header[0]['balance'] - adjusted)"/></span>
                        </div>
                    </div>
                    <div class="row">
                      <div class="col-12">
                        <h2 style="background-color:gray;color:white" class="text-center">
                            Un-Cleared Payments and Receipt
                        </h2>
                      </div>
                    </div>
                    <div class="row mt-5 mb-3">
                        <div class="col-12">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>JV</th>
                                        <th>Date</th>
                                        <th>Cheque #</th>
                                        <th>Type</th>
                                        <th>Reference</th>
                                        <th>Deposits</th>
                                        <th>Payments</th>
                                    </tr>
                                </thead>
                                        <t t-set="credits" t-value="0"/>
                                        <t t-set="debits" t-value="0"/>
                                <tbody>
                                    <tr t-foreach="unpaid" t-as="un">
                                        <td class="col"><t t-esc="un['name']"/></td>
                                        <td class="col"><t t-esc="un['date']"/></td>
                                        <td class="col"><t t-esc="un['cheque_number']"/></td>
                                        <t t-set="type" t-value="env['account.move'].search([('id','=',un['id'])])"/>
                                        <td class="col"><t t-esc="type.journal_type"/></td>
                                        <td class="col"><t t-esc="un['ref']"/></td>
                                        <td class="col text-end"><t t-esc="'%.2f'%(un['debit'])"/></td>
                                        <td class="col text-end"><t t-esc="'%.2f'%(un['credit'])"/></td>
                                        <t t-set="credits" t-value="credits + un['credit']"/>
                                        <t t-set="debits" t-value="debits + un['debit']"/>
                                    </tr>
                                    <tr>
                                      <td colspan="5">Totals</td>
                                      <td class="text-end"><span t-esc="debits"> </span></td>
                                      <td class="text-end"><span t-esc="credits"> </span></td>
                                      
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="row mt-3 mb-3">
                      <div class="col-12">
                        <h2 style="background-color:gray;color:white" class="text-center">
                            Cleared Payments and Receipts
                        </h2>
                      </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>JV</th>
                                        <th>Date</th>
                                        <th>Cheque #</th>
                                        <th>Type</th>
                                        <th>Reference</th>
                                        <th>Deposits</th>
                                        <th>Payments</th>
                                    </tr>
                                </thead>
                                <tbody>
                                  
                                        <t t-set="credits" t-value="0"/>
                                        <t t-set="debits" t-value="0"/>
                                    <tr t-foreach="paid" t-as="un">
                                        <td class="col"><t t-esc="un['name']"/></td>
                                        <td class="col"><t t-esc="un['date']"/></td>
                                        <td class="col"><t t-esc="un['cheque_number']"/></td>
                                        <t t-set="type" t-value="env['account.move'].search([('id','=',un['id'])])"/>
                                        <td class="col"><t t-esc="type.journal_type"/></td>
                                        <td class="col"><t t-esc="un['ref']"/></td>
                                        <td class="col text-end"><t t-esc="'%.2f'%(un['debit'])"/></td>
                                        <td class="col text-end"><t t-esc="'%.2f'%(un['credit'])"/></td>
                                        <t t-set="credits" t-value="credits + un['credit']"/>
                                        <t t-set="debits" t-value="debits + un['debit']"/>
                                    </tr>
                                    <tr>
                                      <td colspan="5"/>
                                      <td class="text-end"><span t-esc="debits"> </span></td>

                                      <td class="text-end"><span t-esc="credits"> </span></td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </t>
        </t>
    </template>
</odoo>